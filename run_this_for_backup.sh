#!/bin/bash

# Colors
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
CYAN='\033[1;36m'
RED='\033[0;31m'
NC='\033[0m' # No Color

# ASCII Art Header
echo -e "${GREEN}"
cat << "EOF"
⠀⠀⠀⠀⠀⠀⠀⠀⢀⣀⣀⣀⣀⣀⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⢀⣀⡿⠿⠿⠿⠿⠿⠿⢿⣀⣀⣀⣀⣀⡀⠀⠀
⠀⠀⠀⠀⠀⠀⠸⠿⣇⣀⣀⣀⣀⣀⣀⣸⠿⢿⣿⣿⣿⡇⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠻⠿⠿⠿⠿⠿⣿⣿⣀⡸⠿⢿⣿⡇⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣤⣤⣿⣿⣿⣧⣤⡼⠿⢧⣤⡀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣤⣤⣿⣿⣿⣿⠛⢻⣿⡇⠀⢸⣿⡇
⠀⠀⠀⠀⠀⠀⠀⠀⣤⣤⣿⣿⣿⣿⠛⠛⠀⢸⣿⡇⠀⢸⣿⡇
⠀⠀⠀⠀⠀⠀⢠⣤⣿⣿⣿⣿⠛⠛⠀⠀⠀⢸⣿⡇⠀⢸⣿⡇
⠀⠀⠀⠀⢰⣶⣾⣿⣿⣿⠛⠛⠀⠀⠀⠀⠀⠈⠛⢳⣶⡞⠛⠁
⠀⠀⢰⣶⣾⣿⣿⣿⡏⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠁⠀⠀
⢰⣶⡎⠉⢹⣿⡏⠉⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⢸⣿⣷⣶⡎⠉⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠉⠉⠉⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
         Minecraft Backup Utility
EOF
echo -e "${NC}"

# Show what has changed in the world folder
echo -e "${YELLOW}Checking for changes in the world folder...${NC}"
git status world
echo

# Confirm to continue
read -p "Do you want to continue with backup? (y/n): " CONTINUE
if [[ "$CONTINUE" != "y" ]]; then
    echo -e "${RED}Backup cancelled.${NC}"
    exit 0
fi

# Add only the world folder
git add world

# Show what will be committed
echo -e "${CYAN}Files staged for commit:${NC}"
git status
echo

# Confirm commit with date/time
CURRENTDT=$(date "+%Y-%m-%d %H:%M:%S")
echo -e "The commit will use this date and time: ${CYAN}${CURRENTDT}${NC}"
read -p "Proceed with commit? (y/n): " CONFIRM_COMMIT
if [[ "$CONFIRM_COMMIT" != "y" ]]; then
    echo -e "${RED}Commit cancelled.${NC}"
    exit 0
fi

# Commit
git commit -m "Backup: $CURRENTDT"

# Confirm push
read -p "Do you want to push the backup to GitHub? (y/n): " CONFIRM_PUSH
if [[ "$CONFIRM_PUSH" != "y" ]]; then
    echo -e "${YELLOW}Push cancelled. You can push later with 'git push'.${NC}"
    exit 0
fi

# Push
git push

echo -e "${GREEN}Backup and push complete!${NC}"
